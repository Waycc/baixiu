(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{80:function(t,e,n){var o=n(94);"string"==typeof o&&(o=[[t.i,o,""]]);var l={hmr:!0,transform:void 0,insertInto:void 0};n(29)(o,l);o.locals&&(t.exports=o.locals)},81:function(t,e,n){},93:function(t,e,n){"use strict";var o=n(80);n.n(o).a},94:function(t,e,n){(t.exports=n(28)(!1)).push([t.i,"@charset \"UTF-8\";\n.edit_container .ql-container {\n  height: 400px;\n}\n.editor {\n  line-height: normal !important;\n  height: 800px;\n}\n.ql-snow .ql-tooltip[data-mode=link]::before {\n  content: \"请输入链接地址:\";\n}\n.ql-snow .ql-tooltip.ql-editing a.ql-action::after {\n  border-right: 0;\n  content: '保存';\n  padding-right: 0;\n}\n.ql-snow .ql-tooltip[data-mode=video]::before {\n  content: \"请输入视频地址:\";\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item::before {\n  content: '14px';\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=small]::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=small]::before {\n  content: '10px';\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=large]::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=large]::before {\n  content: '18px';\n}\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=huge]::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=huge]::before {\n  content: '32px';\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item::before {\n  content: '文本';\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"1\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"1\"]::before {\n  content: '标题1';\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"2\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"2\"]::before {\n  content: '标题2';\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"3\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"3\"]::before {\n  content: '标题3';\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"4\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"4\"]::before {\n  content: '标题4';\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"5\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"5\"]::before {\n  content: '标题5';\n}\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"6\"]::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"6\"]::before {\n  content: '标题6';\n}\n.ql-snow .ql-picker.ql-font .ql-picker-label::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item::before {\n  content: '标准字体';\n}\n.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=serif]::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=serif]::before {\n  content: '衬线字体';\n}\n.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]::before {\n  content: '等宽字体';\n}\n",""])},95:function(t,e,n){"use strict";var o=n(81);n.n(o).a},98:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"container-fluid"},[t._m(0),t._v(" "),n("form",{staticClass:"row"},[n("div",{staticClass:"col-md-9",staticStyle:{position:"relative"}},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"title"}},[t._v("标题")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.postTitle,expression:"postTitle"}],staticClass:"form-control",attrs:{id:"title",name:"title",type:"text",placeholder:"文章标题"},domProps:{value:t.postTitle},on:{input:function(e){e.target.composing||(t.postTitle=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("vue-editor",{attrs:{content:t.content},on:{sendParent:t.changeContent}})],1),t._v(" "),n("div",{staticClass:"form-group"},[n("button",{staticClass:"btn btn-primary",attrs:{id:"article-save"},on:{click:function(e){return e.preventDefault(),t.savePost(e)}}},[t._v("保存")])])]),t._v(" "),n("div",{staticClass:"col-md-3"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"category"}},[t._v("所属分类")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.postCategory,expression:"postCategory"}],staticClass:"form-control",attrs:{id:"category",name:"category"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.postCategory=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"0"}},[t._v("未分类")]),t._v(" "),t._l(t.categoriesList,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])})],2)]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"status"}},[t._v("状态")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.postStatus,expression:"postStatus"}],staticClass:"form-control",attrs:{id:"status",name:"status"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.postStatus=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"drafted"}},[t._v("草稿")]),t._v(" "),n("option",{attrs:{value:"published"}},[t._v("发布")])])])])])])])};o._withStripped=!0;var l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit_container"},[n("quill-editor",{ref:"myQuillEditor",attrs:{value:t.content,options:t.editorOption},on:{blur:function(e){return t.onEditorBlur(e)},focus:function(e){return t.onEditorFocus(e)},change:function(e){return t.onEditorChange(e)}}})],1)};l._withStripped=!0;var a=n(84);const r={"ql-bold":"加粗","ql-color":"颜色","ql-font":"字体","ql-code":"插入代码","ql-italic":"斜体","ql-link":"添加链接","ql-background":"背景颜色","ql-size":"字体大小","ql-strike":"删除线","ql-script":"上标/下标","ql-underline":"下划线","ql-blockquote":"引用","ql-header":"标题","ql-indent":"缩进","ql-list":"列表","ql-align":"文本对齐","ql-direction":"文本方向","ql-code-block":"代码块","ql-formula":"公式","ql-image":"图片","ql-video":"视频","ql-clean":"清除字体样式"};n(90),n(91),n(92);var i={name:"vueEditor",components:{quillEditor:a.quillEditor},props:["content"],data:function(){return{content:"",editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},placeholder:"请在这里添加您的内容",readyOnly:!1,theme:"snow",syntax:!0}}},methods:{onEditorReady:function(t){},onEditorBlur:function(){},onEditorFocus:function(){},onEditorChange:function(t){this.$emit("sendParent",t.html)}},computed:{editor:function(){return this.$refs.myQuillEditor.quill}},mounted:function(){!function(){const t=document.querySelector(".ql-toolbar"),e=t.querySelectorAll("button"),n=t.querySelectorAll("select");e.forEach(function(t){"ql-script"===t.className?"sub"===t.value?t.title="下标":t.title="上标":"ql-indent"===t.className?"+1"===t.value?t.title="向右缩进":t.title="向左缩进":t.title=r[t.classList[0]]}),n.forEach(function(t){t.parentNode.title=r[t.classList[0]]})}()}},s=(n(93),n(2)),c=Object(s.a)(i,l,[],!1,null,null,null);c.options.__file="src/components/vue-editor.vue";var d=c.exports,u=n(5),p={name:"postAdd",components:{vueEditor:d},data:function(){return{content:"",postTitle:"",postCategory:0,postStatus:"drafted",categoriesList:[],postId:""}},computed:{paramsObj:function(){return{postId:this.postId,content:this.content,title:this.postTitle,category_id:this.postCategory,status:this.postStatus,author_id:this.$store.state.userInfo.id,tags:"",views:""}}},methods:{savePost:function(t){var e=this;switch(console.log(this.paramsObj),!0){case!this.postTitle:return void alert("标题不能为空");case!this.content:return void alert("内容不能为空")}this.postId?u.a.updatePost(this.paramsObj).then(function(t){t.data.status&&(alert("修改文章成功"),e.$router.go(0))}):u.a.addPost(this.paramsObj).then(function(t){t.data.status?(alert("添加文章成功"),e.$router.go(0)):alert(t.data.message||"添加文章失败")})},getCategory:function(){var t=this;u.a.getCategory().then(function(e){e.data.status?t.categoriesList=e.data.data:alert(e.data.message||"获取类别失败")})},changeContent:function(t){this.content=t}},created:function(){this.getCategory()},beforeRouteEnter:function(t,e,n){t.params.postId?u.a.getPost({postId:t.params.postId}).then(function(t){var e=t.data;e.status&&n(function(t){console.log(e.data.title),t.postId=e.data.id,t.content=e.data.content,t.postTitle=e.data.title,t.postStatus=e.data.status,t.postCategory=e.data.category_id||0})}):n()}},q=(n(95),Object(s.a)(p,o,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page-title"},[e("h1",[this._v("写文章")])])}],!1,null,"15f42ff8",null));q.options.__file="src/components/post-add.vue";e.default=q.exports}}]);