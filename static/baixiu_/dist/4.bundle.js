(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{99:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container-fluid"},[t._m(0),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("form",[a("h2",[t._v("添加新分类目录")]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[t._v("名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.categoriesName,expression:"categoriesName"}],staticClass:"form-control",attrs:{id:"name",name:"name",type:"text",placeholder:"分类名称"},domProps:{value:t.categoriesName},on:{input:function(e){e.target.composing||(t.categoriesName=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"slug"}},[t._v("描述")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.categoriesDes,expression:"categoriesDes"}],staticClass:"form-control",attrs:{id:"slug",name:"slug",type:"text",placeholder:"描述"},domProps:{value:t.categoriesDes},on:{input:function(e){e.target.composing||(t.categoriesDes=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.addCategory(e)}}},[t._v("添加")])])])]),t._v(" "),a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"page-action"},[a("a",{staticClass:"btn btn-danger btn-sm",attrs:{href:"javascript:;"},on:{click:t.batchDelete}},[t._v("批量删除")])]),t._v(" "),a("table",{staticClass:"table table-striped table-bordered table-hover"},[a("thead",[a("tr",[a("th",{staticClass:"text-center",attrs:{width:"40"}},[a("input",{attrs:{type:"checkbox"},domProps:{checked:t.categoriesList.length===t.categoriesIds.length&&t.categoriesIds.length},on:{click:t.checkAll}})]),t._v(" "),a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("描述")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{width:"100"}},[t._v("操作")])])]),t._v(" "),a("tbody",t._l(t.categoriesList,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("input",{attrs:{type:"checkbox"},domProps:{checked:t.categoriesIds.includes(e.id)},on:{click:function(a){return a.stopPropagation(),t.handleCheck(e.id)}}})]),t._v(" "),a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(e.des))]),t._v(" "),a("td",{staticClass:"text-center"},[a("a",{staticClass:"btn btn-info btn-xs",attrs:{href:"javascript:;"}},[t._v("编辑")]),t._v(" "),a("a",{staticClass:"btn btn-danger btn-xs",attrs:{href:"javascript:;"},on:{click:function(a){return a.stopPropagation(),t.deleteCategory(e.id)}}},[t._v("删除")])])])}),0)])])])])])};s._withStripped=!0;var i=a(5),r={name:"categories",data:function(){return{categoriesName:"",categoriesDes:"",categoriesList:[],categoriesIds:[]}},created:function(){this.getCategory()},methods:{resetForm:function(){this.categoriesName="",this.categoriesDes=""},getCategory:function(){var t=this;i.a.getCategory().then(function(e){e.data.status?t.categoriesList=e.data.data:alert(e.data.message||"获取类别失败")})},addCategory:function(){var t=this;this.categoriesName?i.a.addCategory(this.paramsObj).then(function(e){e.data.status?(alert("添加成功"),t.getCategory(),t.resetForm()):alert("添加失败")}):alert("请输入类别名")},handleCheck:function(t){var e=this.categoriesIds.indexOf(t);e>=0?this.categoriesIds.splice(e,1):this.categoriesIds.push(t)},checkAll:function(){var t=this;this.categoriesList.length!==this.categoriesIds.length?this.categoriesList.map(function(e){t.categoriesIds.includes(e.id)||t.categoriesIds.push(e.id)}):this.categoriesIds=[]},deleteCategory:function(t){var e=this;confirm("是否删除")&&i.a.deleteCategory({categoryId:t}).then(function(t){t.data.status&&(alert("删除成功"),e.getCategory())})},batchDelete:function(){var t=this;0!==this.categoriesIds.length?confirm("是否批量删除已选中项？")&&i.a.batchDeleteCategory({categoryIds:this.categoriesIds}).then(function(e){alert("批量删除成功"),t.getCategory()}):alert("请先选择删除项")}},computed:{paramsObj:function(){return{name:this.categoriesName,des:this.categoriesDes}}}},o=a(2),c=Object(o.a)(r,s,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page-title"},[e("h1",[this._v("分类目录")])])}],!1,null,"1ecb262c",null);c.options.__file="src/components/categories.vue";e.default=c.exports}}]);